#include <stdio.h>
#include <time.h>

void dump_time_struct_bytes(struct tm *time_ptr, int size) {
	int i;
	unsigned char *raw_ptr;

	printf("bytes of struct located at 0x%08x\n", time_ptr);
	raw_ptr = (unsigned char *) time_ptr;
	for(i=0; i < size; i++)
	{
		printf("%02x ", raw_ptr[i]);
		if(i%16 == 15) // print a newline every 16 bytes
			printf("\n");
	}
	printf("\n");
}

int main() {
	long int seconds_since_epoch;
	struct tm current_time, *time_ptr;
	int hour, minute, second, i, *int_ptr;

	seconds_since_epoch = time(0); // pass time a null pointer as argument
	printf("time() - seconds since epoch: %ld\n", seconds_since_epoch);

	time_ptr = &current_time;  // set time_ptr to the address of
                              // the current_time struct
	localtime_r(&seconds_since_epoch, time_ptr);

	// three different ways to access struct elements
	hour = current_time.tm_hour;  // direct access
	minute = time_ptr->tm_min;    // access via pointer
	second = *((int *) time_ptr); // hacky pointer access

	printf("Current time is: %02d:%02d:%02d\n", hour, minute, second);

	dump_time_struct_bytes(time_ptr, sizeof(struct tm));

	minute = hour = 0;  // clear out minute and hour
	int_ptr = (int *) time_ptr;

	for(i=0; i < 3; i++) {
		printf("int_ptr @ 0x%08x : %d\n", int_ptr, *int_ptr);
		int_ptr++; // adding 1 to int_ptr adds 4 to the address,
	}             // since an int is 4 bytes in size
}
	
	===========================================================OUTPUT=================================================
  #gcc -g time_example2.c
 #./a.out
 time() - seconds since epoch: 1501494258
 Current time is: 04:55:35
 bytes of struct located at 0x129fc820
 
23 00 00 00 37 00 00 00 04 00 00 00 1f 00 00 00 
07 00 00 00 75 00 00 00 02 00 00 00 d4 00 00 00 
01 00 00 00 65 00 5f 5f c0 c7 ff ff ff ff ff ff 
70 84 ff 00 00 00 00 00 
int_ptr @ 0x2cb6d1d0 : 18
int_ptr @ 0x2cb6d1d4 : 44
int_ptr @ 0x2cb6d1d8 : 5

first row show binary formate tells the hours
second row show binary formate tells the second
third row show binary formate tells the minute
